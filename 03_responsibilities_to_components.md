## Mapping responsibilities to C4 elements

### Feature 1 – Student Exam Registration

| Responsibility group | Container(s) | Component(s) | Notes |
| --- | --- | --- | --- |
| **Exam Term Sign-In Page and Authentication Guard** – serve exam sign-in page, ensure student is authenticated, show course lookup form | Web Application | Login Page & Auth Guard; Exam Registration Page | Login page checks identity; registration page shows the course lookup UI once the user is authenticated. |
| **Course Lookup Input Handling** – capture input, basic validation/sanitisation | Web Application; Application Core | Exam Registration Page; Course Lookup Service | Page captures the raw input; the service validates and normalises it before querying. |
| **Course Resolution in Course DB** – find course, handle “course not found” | Application Core; Exam Database | Course Lookup Service; Exam Repository | Lookup service coordinates; repository actually talks to the DB. Error is surfaced back to the UI. |
| **Term Schedule Retrieval** – query timetable for course terms this year, prepare data for display | Application Core; Exam Database | Exam Term Query Service; Exam Repository | Query service builds the query & view model; repository reads exam terms and capacities. |
| **Exam Term(s) Presentation** – render list of terms and controls | Web Application | Exam Registration Page | Shows term list, capacities, locations and “sign in” buttons. |
| **Exam Term Selection Capture** – record selected term and confirmation | Web Application | Exam Registration Page | Stores the chosen term ID and sends it to the backend when user confirms. |
| **Registration / Enrollment Verification – enrolment check** – verify student is enrolled in the course | Application Core; SIS; Exam Database | Eligibility Check Service; Exam Repository | Eligibility service checks SIS / student data (enrolment) via repository and external SIS adapter. |
| **Registration / Enrollment Verification – max registration count** – ensure student won’t exceed allowed attempts | Application Core; Exam Database | Eligibility Check Service; Exam Repository | Counts existing registrations for the student + course. |
| **Registration / Enrollment Verification – conflict check** – detect registration to another term of the same subject | Application Core; Exam Database | Eligibility Check Service; Exam Term Query Service; Exam Repository | Uses timetable data to detect overlapping registrations for same course. |
| **Registration / Enrollment Verification – credit requirement** – check whether course requires credit and whether the student has it | Application Core; SIS/Exam Database | Eligibility Check Service; Exam Repository | Reads course requirements/credits and checks student’s record. |
| **Registration / Enrollment Verification – capacity check & reservation** – verify free seats and protect against overbooking | Application Core; Exam Database | Capacity Check Service; Exam Repository | Performs capacity check and updates the term’s occupied-seats atomically. |
| **Registration / Enrollment Verification – update registration info** – update timetable and student’s list of signed exams | Application Core; Exam Database | Exam Repository | Inserts/updates rows in registrations + links to exam term and student. |
| **Outcome Notification / Alerting** – recognise success/failure, show or send notification | Web Application; Notification Worker; Email system | Notification Widget; Notification Facade; Registration Notifier; Email Sender | Widget shows on-screen messages. Facade creates domain event; notifier builds e-mail; sender pushes it via school mail system. |
| **Notification / Alert Logging** – record/log delivery status | Notification Worker; Exam Database | Notification Log | Persists metadata about notifications (what was sent and whether delivery succeeded). |

### Feature 2 – Reservation of Exam Premises

| Responsibility group | Container(s) | Component(s) | Notes |
| --- | --- | --- | --- |
| **Exam Term Editor Initialization** – load and display the selected exam term’s details; verify the User has permission to edit the term | Web Application; Application Core; Exam Database | Exam Term Management Page; Exam Term Query Service; Exam Repository | The Exam Term Management Page opens the editor; the query service + repository load the term details (only for the teacher who owns the term). |
| **Location Field Activation** – detect User interaction with the location field and open the room-selection interface | Web Application | Exam Term Management Page; Room Reservation Page | The management page listens for focus/click on the location field and opens the Room Reservation Page (dialog/overlay) for picking a room or custom location. |
| **Classroom Availability Lookup** – retrieve all school-owned classrooms and filter out those unavailable for the exam term’s time window | Application Core; Exam Database | Room Availability Service; Exam Term Query Service; Exam Repository | Room Availability Service uses the exam term’s time window (via Exam Term Query Service / repository) to query the DB and return only free classrooms. |
| **Room Option Presentation** – display the list of available classrooms, including the “Other” option for custom location entry | Web Application | Room Reservation Page | The Room Reservation Page renders the list of available rooms received from the backend and adds the “Other” option for entering a custom location. |
| **Classroom Selection Handling** – capture the User’s selected classroom choice and validate that the room is still available | Web Application; Application Core | Room Reservation Page; Room Availability Service | The Room Reservation Page sends the chosen room to the backend; Room Availability Service re-checks that the room has not been reserved in the meantime. |
| **Classroom Reservation & Persistence** – mark the selected classroom as reserved for the exam term and update the exam term’s location in the database | Application Core; Exam Database | Room Reservation Service; Exam Repository | Room Reservation Service performs the update in a single operation via the repository: marks the room as reserved and sets the exam term’s location to that room. |
| **Custom Location Handling** – when “Other” is selected, prompt the User for a custom location, validate it and update the exam term with the custom location | Web Application; Application Core; Exam Database | Room Reservation Page; Room Reservation Service; Exam Repository | The Room Reservation Page collects the custom location; Room Reservation Service validates and persists the custom location as the term’s new place (without touching room reservations). |
| **Success Notification** – notify the User that the classroom or custom location update was successful (and send confirmation e-mail) | Web Application; Notification Worker; Email system; Exam Database | Notification Widget; Room Reservation Notifier; Email Sender; Notification Log | The Notification Widget shows an inline success message; Room Reservation Notifier builds a confirmation e-mail, Email Sender delivers it via the school e-mail system and Notification Log stores delivery metadata. |
| **Editor State Refresh & UI Consistency** – refresh the editor view after the location change and ensure the updated room/custom location is shown consistently across UI sections | Web Application; Application Core; Exam Database | Exam Term Management Page; Exam Term Query Service; Exam Repository | After a successful update, the Exam Term Management Page reloads the term via Exam Term Query Service/Exam Repository so the new location is visible everywhere in the editor. |
